# Kickstart file generated by gsfjohnson/ansible-kickstart-role.

#version=RHEL7
# System authorization information
auth --enableshadow --passalgo=sha512

# Use non-interactive text mode
{% if item.cmdline is defined and item.cmdline %}
cmdline
{% endif %}
{% if item.text is defined and item.text %}
text
{% endif %}

{% if item.url is defined %}
# Use network installation
url --url={{item.url}}
{% endif %}

# Run the Setup Agent on first boot
firstboot --enable
ignoredisk --only-use=sda

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'

# System language
lang en_US.UTF-8

# Network information
network --device=bootif --noipv6 --bootproto=dhcp   --onboot=on --activate

# Initial firewall configuration
firewall --disabled

# Root password
{% if ks_rootpw is defined %}
rootpw --iscrypted {{ks_rootpw}}
{% endif %}

# Do not configure the X Window System
skipx

# System timezone
timezone {{ks_timezone}} --isUtc

# System bootloader configuration
bootloader --location=mbr --boot-drive=sda
autopart --type=lvm

# Partition clearing information
clearpart --all --initlabel --drives=sda

# Auto-reboot when install is complete
reboot

%packages --nobase
{% for pkg in item.pkgs %}
{{pkg}}
{% endfor %}

%end

